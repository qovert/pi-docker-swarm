---
# =============================================================================
# Pi Docker Swarm Cluster - Main Orchestrator
# =============================================================================
# Complete cluster lifecycle management with dynamic service deployment
# =============================================================================

# =============================================================================
# Phase 1: Security Setup - SSH Keys and Access
# =============================================================================
- import_playbook: playbooks/setup-cluster-ssh.yml
  tags: ["security", "ssh"]

- import_playbook: security/populate_authorized_keys.yml
  tags: ["security", "keys"]

# =============================================================================
# Phase 2: Infrastructure Setup
# =============================================================================
- import_playbook: playbooks/configure-storage.yml
  tags: ["infrastructure"]

# =============================================================================
# Phase 3: Container Platform Setup
# =============================================================================
- import_playbook: container-platform/setup_docker_swarm.yml
  tags: ["container-platform"]

# =============================================================================
# Phase 4: ZFS Dataset Management
# =============================================================================
- import_playbook: playbooks/manage-zfs-datasets.yml
  tags: ["zfs", "datasets"]

# =============================================================================
# Phase 5: Syncoid Setup for Data Synchronization
# =============================================================================
- import_playbook: playbooks/setup-syncoid.yml
  tags: ["syncoid", "synchronization"]

# =============================================================================
# Phase 6: Dynamic Service Deployment
# =============================================================================
- import_playbook: playbooks/dynamic-services.yml
  tags: ["services"]
